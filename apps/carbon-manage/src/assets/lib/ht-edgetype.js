!function(y){"use strict";var Y="ht",h=y[Y],r=Math,M=r.max,q=r.min,w=r.abs,P=r.atan2,B=(r.cos,r.sin,r.ceil),S=h.Default,$=S.getInternal(),z=h.List,c=$.Mat,K=$.getNodeRect,U=$.intersectionLineRect,k=S.getDistance,p=S.setEdgeType,v="left",e="right",C="top",W="bottom",d="edge.type",l="edge.gap",H="edge.center",n="edge.extend",V=function(d,_){return K(d,_).width},a=function(y,o){return K(y,o).height},f=function(S,W){return $.getEdgeHostPosition(S,W,"source")},j=function(W,t){return $.getEdgeHostPosition(W,t,"target")},G=function(i,P){var q=i.s(d),R=i.getEdgeGroup();if(R){var E=0;if(R.eachSiblingEdge(function(Q){P.isVisible(Q)&&Q.s(d)==q&&E++}),E>1)return i.s(l)*(E-1)/2}return 0},A=function(k,t){var B=k.s(d),U=k.isLooped();if(!k.getEdgeGroup())return U?k.s(l):0;var P,F=0,v=0,Q=0;return k.getEdgeGroup().getSiblings().each(function(e){e.each(function($){if($._40I===k._40I&&$.s(d)==B&&t.isVisible($)){var V=$.s(l);P?(v+=Q/2+V/2,Q=V):(P=$,Q=V),$===k&&(F=v)}})}),U?v-F+Q:F-v/2},L=function(e,C){var H=C.s("edge.corner.radius");return S.toRoundedCorner(e,H)};$.addMethod(h.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),p("boundary",function(m,B,Q,v){v||(B=-B);var A,y=f(Q,m),x=j(Q,m),p=K(Q,m._40I),s=K(Q,m._41I),g=new c(P(x.y-y.y,x.x-y.x)),h=k(y,x),$=y.x,J=y.y;return A=g.tf(0,B),y={x:A.x+$,y:A.y+J},A=g.tf(h,B),x={x:A.x+$,y:A.y+J},A=U(y,x,p),A&&(y={x:A[0],y:A[1]}),A=U(y,x,s),A&&(x={x:A[0],y:A[1]}),{points:new z([y,x])}}),p("ripple",function(A,S,u,L){L||(S=-S);var C=f(u,A),R=j(u,A),o=k(C,R),w=q(A.s("edge.offset"),o/2),O=A.s("edge.ripple.size"),d=A.s("edge.ripple.length"),U=A.s("edge.ripple.both"),l=A.s(H),x=A.s("edge.ripple.elevation"),D=new z,J=A.s("edge.ripple.straight")?null:new z,G=new c(P(R.y-C.y,R.x-C.x));L||(x=-x),o-=2*w,d>0&&(O=B(o/d));var W=o/O;J&&J.add(1);for(var n=0;O>n;n++)J&&J.add(3),0===n?D.add({x:w+W*n,y:l?0:S}):D.add({x:w+W*n,y:S}),D.add({x:w+W*n+W/2,y:x+S}),U&&(x=-x);for(D.add({x:w+o,y:l?0:S}),n=0;n<D.size();n++){var s=G.tf(D.get(n));s.x+=C.x,s.y+=C.y,D.set(n,s)}return{points:D,segments:J}}),p("h.v",function(K,x,t){x=A(K,t);var B=new z,Z=K.s(H),N=f(t,K),i=N.x,o=N.y,l=j(t,K),F=l.x,p=l.y,b=K._40I instanceof h.Edge,Y=K._41I instanceof h.Edge,X=0,w=0,U=F-i,R=p-o;return Z||(X=b?0:V(t,K._40I)/2,w=Y?0:a(t,K._41I)/2),U>=0&&0>=R?(B.add({x:i+X,y:o+x}),B.add({x:F+x,y:o+x}),B.add({x:F+x,y:p+w})):0>=U&&R>=0?(B.add({x:i-X,y:o+x}),B.add({x:F+x,y:o+x}),B.add({x:F+x,y:p-w})):U>=0&&R>=0?(B.add({x:i+X,y:o+x}),B.add({x:F-x,y:o+x}),B.add({x:F-x,y:p-w})):(B.add({x:i-X,y:o+x}),B.add({x:F-x,y:o+x}),B.add({x:F-x,y:p+w})),L(B,K)}),p("v.h",function(m,G,W){G=A(m,W);var $=new z,K=m.s(H),e=f(W,m),D=e.x,p=e.y,R=j(W,m),C=R.x,o=R.y,l=m._40I instanceof h.Edge,N=m._41I instanceof h.Edge,Q=0,Y=0,b=C-D,w=o-p;return K||(Q=N?0:V(W,m._41I)/2,Y=l?0:a(W,m._40I)/2),b>=0&&0>=w?($.add({x:D+G,y:p-Y}),$.add({x:D+G,y:o+G}),$.add({x:C-Q,y:o+G})):0>=b&&w>=0?($.add({x:D+G,y:p+Y}),$.add({x:D+G,y:o+G}),$.add({x:C+Q,y:o+G})):b>=0&&w>=0?($.add({x:D-G,y:p+Y}),$.add({x:D-G,y:o+G}),$.add({x:C-Q,y:o+G})):($.add({x:D-G,y:p-Y}),$.add({x:D-G,y:o+G}),$.add({x:C+Q,y:o+G})),L($,m)}),p("ortho",function(I,p,l){var J=new z,g=I.s(H),R=I.s("edge.ortho"),N=I._40I,Y=I._41I,P=f(l,I),K=P.x,k=P.y,d=j(l,I),s=d.x,B=d.y,S=s-K,r=B-k,W=N instanceof h.Edge,A=Y instanceof h.Edge,U=g||W?0:V(l,N)/2,T=g||W?0:a(l,N)/2,E=g||A?0:V(l,Y)/2,u=g||A?0:a(l,Y)/2,m=(S-(U+E)*(S>0?1:-1))*R,X=(r-(T+u)*(r>0?1:-1))*R;return w(S)<w(r)?S>=0&&0>=r?(J.add({x:K+p,y:k-T}),J.add({x:K+p,y:k+X+p-T}),J.add({x:s+p,y:k+X+p-T}),J.add({x:s+p,y:B+u})):0>=S&&r>=0?(J.add({x:K+p,y:k+T}),J.add({x:K+p,y:k+X+p+T}),J.add({x:s+p,y:k+X+p+T}),J.add({x:s+p,y:B-u})):S>=0&&r>=0?(J.add({x:K+p,y:k+T}),J.add({x:K+p,y:k+X-p+T}),J.add({x:s+p,y:k+X-p+T}),J.add({x:s+p,y:B-u})):(J.add({x:K+p,y:k-T}),J.add({x:K+p,y:k+X-p-T}),J.add({x:s+p,y:k+X-p-T}),J.add({x:s+p,y:B+u})):S>=0&&0>=r?(J.add({x:K+U,y:k+p}),J.add({x:K+m+p+U,y:k+p}),J.add({x:K+m+p+U,y:B+p}),J.add({x:s-E,y:B+p})):0>=S&&r>=0?(J.add({x:K-U,y:k+p}),J.add({x:K+m+p-U,y:k+p}),J.add({x:K+m+p-U,y:B+p}),J.add({x:s+E,y:B+p})):S>=0&&r>=0?(J.add({x:K+U,y:k+p}),J.add({x:K+m-p+U,y:k+p}),J.add({x:K+m-p+U,y:B+p}),J.add({x:s-E,y:B+p})):(J.add({x:K-U,y:k+p}),J.add({x:K+m-p-U,y:k+p}),J.add({x:K+m-p-U,y:B+p}),J.add({x:s+E,y:B+p})),L(J,I)}),p("flex",function(p,x,d){var $=new z,Q=p.s("edge.flex")+G(p,d),v=p.s(H),B=p._40I,P=p._41I,T=f(d,p),r=T.x,D=T.y,s=j(d,p),M=s.x,c=s.y,t=B instanceof h.Edge,m=P instanceof h.Edge,n=M-r,l=c-D,e=v||t?0:V(d,B)/2,y=v||t?0:a(d,B)/2,b=v||m?0:V(d,P)/2,Z=v||m?0:a(d,P)/2,X=n>0?Q:-Q,J=l>0?Q:-Q;return w(n)<w(l)?n>=0&&0>=l?($.add({x:r+x,y:D-y}),$.add({x:r+x,y:D+J+x-y}),$.add({x:M+x,y:c-J+x+Z}),$.add({x:M+x,y:c+Z})):0>=n&&l>=0?($.add({x:r+x,y:D+y}),$.add({x:r+x,y:D+J+x+y}),$.add({x:M+x,y:c-J+x-Z}),$.add({x:M+x,y:c-Z})):n>=0&&l>=0?($.add({x:r+x,y:D+y}),$.add({x:r+x,y:D+J-x+y}),$.add({x:M+x,y:c-J-x-Z}),$.add({x:M+x,y:c-Z})):($.add({x:r+x,y:D-y}),$.add({x:r+x,y:D+J-x-y}),$.add({x:M+x,y:c-J-x+Z}),$.add({x:M+x,y:c+Z})):n>=0&&0>=l?($.add({x:r+e,y:D+x}),$.add({x:r+X+x+e,y:D+x}),$.add({x:M-X+x-b,y:c+x}),$.add({x:M-b,y:c+x})):0>=n&&l>=0?($.add({x:r-e,y:D+x}),$.add({x:r+X+x-e,y:D+x}),$.add({x:M-X+x+b,y:c+x}),$.add({x:M+b,y:c+x})):n>=0&&l>=0?($.add({x:r+e,y:D+x}),$.add({x:r+X-x+e,y:D+x}),$.add({x:M-X-x-b,y:c+x}),$.add({x:M-b,y:c+x})):($.add({x:r-e,y:D+x}),$.add({x:r+X-x-e,y:D+x}),$.add({x:M-X-x+b,y:c+x}),$.add({x:M+b,y:c+x})),L($,p)}),p("extend.east",function(o,D,m){var W=new z,q=o.s(n)+G(o,m),x=o.s(H),$=f(m,o),c=o._40I instanceof h.Edge,Q=o._41I instanceof h.Edge,v=$.x+(x||c?0:V(m,o._40I)/2),A=$.y,K=j(m,o),F=K.x+(x||Q?0:V(m,o._41I)/2),Z=K.y,y=M(v,F)+q;return A>Z?(W.add({x:v,y:A+D}),W.add({x:y+D,y:A+D}),W.add({x:y+D,y:Z-D}),W.add({x:F,y:Z-D})):(W.add({x:v,y:A-D}),W.add({x:y+D,y:A-D}),W.add({x:y+D,y:Z+D}),W.add({x:F,y:Z+D})),L(W,o)}),p("extend.west",function(S,r,u){var m=new z,R=S.s(n)+G(S,u),g=S.s(H),y=S._40I instanceof h.Edge,X=S._41I instanceof h.Edge,W=f(u,S),T=W.x-(g||y?0:V(u,S._40I)/2),A=W.y,i=j(u,S),D=i.x-(g||X?0:V(u,S._41I)/2),Q=i.y,t=q(T,D)-R;return A>Q?(m.add({x:T,y:A+r}),m.add({x:t-r,y:A+r}),m.add({x:t-r,y:Q-r}),m.add({x:D,y:Q-r})):(m.add({x:T,y:A-r}),m.add({x:t-r,y:A-r}),m.add({x:t-r,y:Q+r}),m.add({x:D,y:Q+r})),L(m,S)}),p("extend.north",function(r,t,D){var T=new z,b=r.s(n)+G(r,D),u=r.s(H),Y=r._40I instanceof h.Edge,k=r._41I instanceof h.Edge,P=f(D,r),Z=P.x,g=P.y-(u||Y?0:a(D,r._40I)/2),v=j(D,r),Q=v.x,s=v.y-(u||k?0:a(D,r._41I)/2),o=q(g,s)-b;return Z>Q?(T.add({y:g,x:Z+t}),T.add({y:o-t,x:Z+t}),T.add({y:o-t,x:Q-t}),T.add({y:s,x:Q-t})):(T.add({y:g,x:Z-t}),T.add({y:o-t,x:Z-t}),T.add({y:o-t,x:Q+t}),T.add({y:s,x:Q+t})),L(T,r)}),p("extend.south",function(e,i,I){var F=new z,Q=e.s(n)+G(e,I),t=e.s(H),g=e._40I instanceof h.Edge,q=e._41I instanceof h.Edge,E=f(I,e),b=E.x,B=E.y+(t||g?0:a(I,e._40I)/2),T=j(I,e),X=T.x,D=T.y+(t||q?0:a(I,e._41I)/2),m=M(B,D)+Q;return b>X?(F.add({y:B,x:b+i}),F.add({y:m+i,x:b+i}),F.add({y:m+i,x:X-i}),F.add({y:D,x:X-i})):(F.add({y:B,x:b-i}),F.add({y:m+i,x:b-i}),F.add({y:m+i,x:X+i}),F.add({y:D,x:X+i})),L(F,e)});var t=function(F,s,K,G,j){if(G.sort(function(Y,r){var B=Y.getSourceAgent()===s?Y.getTargetAgent():Y.getSourceAgent(),J=r.getSourceAgent()===s?r.getTargetAgent():r.getSourceAgent(),m=B.p(),O=J.p();if(K===v||K===e){if(m.y>O.y)return 1;if(m.y<O.y)return-1}else{if(m.x>O.x)return 1;if(m.x<O.x)return-1}return S.sortFunc(Y.getId(),r.getId())}),j){for(var E,i,Y,W=F.getSourceAgent(),A=F.getTargetAgent(),B=0;B<G.size();B++){var P=G.get(B);P.getSourceAgent()===W&&P.getTargetAgent()===A||P.getTargetAgent()===W&&P.getSourceAgent()===A?(i||(i=new z),i.add(P,0)):i?(Y||(Y=new z),Y.add(P)):(E||(E=new z),E.add(P))}G.clear(),E&&G.addAll(E),i&&G.addAll(i),Y&&G.addAll(Y)}var H=G.indexOf(F),R=G.size(),b=F.s(l);return{side:K,index:H,size:R,offset:-b*(R-1)/2+b*H}},Q=function(Q,C,E,j,b){var m=C.s(d);return t(C,E,j,E.getAgentEdges().toList(function(k){return Q.isVisible(k)&&k.s(d)===m}),b)},m=function(T,B){var G=T.getSourceAgent()===B?T.getTargetAgent():T.getSourceAgent(),Q=B.p(),n=G.p(),s=n.x-Q.x,N=n.y-Q.y;return s>0&&w(N)<=s?e:0>s&&w(N)<=-s?v:N>0&&w(s)<=N?W:C},u=function(s,o,h){var e=o.s(d),U=m(o,h);return t(o,h,U,h.getAgentEdges().toList(function(Y){return s.isVisible(Y)&&Y.s(d)===e&&m(Y,h)===U}))},g=function(D,X){var y=D.getSourceAgent()===X,N=y?D.getTargetAgent():D.getSourceAgent(),L=X.p(),$=N.p();return y?L.y>$.y?C:W:L.x<$.x?e:v},T=function(I,f,S){var y=f.s(d),k=g(f,S);return t(f,S,k,S.getAgentEdges().toList(function(Y){return I.isVisible(Y)&&Y.s(d)===y&&g(Y,S)===k}),k===e||k===W)},N=function(B,$){var r=B.getSourceAgent()===$,l=r?B.getTargetAgent():B.getSourceAgent(),t=$.p(),J=l.p();return r?t.x<J.x?e:v:t.y>J.y?C:W},o=function(A,M,V){var Y=M.s(d),O=N(M,V);return t(M,V,O,V.getAgentEdges().toList(function(g){return A.isVisible(g)&&g.s(d)===Y&&N(g,V)===O}),O===e||O===W)},s=function($,h,n){var o=$.getSourceAgent(),G=$.getTargetAgent(),p=o.getId()>G.getId(),Q=p?G:o,q=p?o:G,c=Q.p(),m=q.p(),Y=n(h,$,Q),s=n(h,$,q),O=$.s(H),l=O?0:V(h,Q)/2,F=O?0:V(h,q)/2,Z=O?0:a(h,Q)/2,j=O?0:a(h,q)/2,U=Y.offset,w=s.offset,r=Y.side,R=s.side,b=new z;return r===C?(b.add({x:c.x+U,y:c.y-Z}),b.add({x:c.x+U,y:m.y+w}),R===v?b.add({x:m.x-F,y:m.y+w}):b.add({x:m.x+F,y:m.y+w})):r===W?(b.add({x:c.x+U,y:c.y+Z}),b.add({x:c.x+U,y:m.y+w}),R===v?b.add({x:m.x-F,y:m.y+w}):b.add({x:m.x+F,y:m.y+w})):r===v?(b.add({x:c.x-l,y:c.y+U}),b.add({x:m.x+w,y:c.y+U}),R===W?b.add({x:m.x+w,y:m.y+j}):b.add({x:m.x+w,y:m.y-j})):r===e&&(b.add({x:c.x+l,y:c.y+U}),b.add({x:m.x+w,y:c.y+U}),R===W?b.add({x:m.x+w,y:m.y+j}):b.add({x:m.x+w,y:m.y-j})),p&&b.reverse(),L(b,$)};p("ortho2",function(O,k,l){var T,o,R=O.s(H),A=O.s("edge.ortho"),p=O.getSourceAgent(),M=O.getTargetAgent(),U=p.getId()>M.getId(),b=U?M:p,w=U?p:M,B=b.p(),s=w.p(),g=u(l,O,b),d=u(l,O,w),S=R?0:V(l,b)/2,x=R?0:a(l,b)/2,$=R?0:V(l,w)/2,n=R?0:a(l,w)/2,F=new z,t=g.offset,Y=d.offset,r=g.side;return r===e?(T=s.y>B.y?-t:t,o=B.x+S+(s.x-$-B.x-S)*A,F.add({x:B.x+S,y:B.y+t}),F.add({x:o+T,y:B.y+t}),F.add({x:o+T,y:s.y+Y}),F.add({x:s.x-$,y:s.y+Y})):r===v?(T=s.y>B.y?-t:t,o=B.x-S-(B.x-S-s.x-$)*A,F.add({x:B.x-S,y:B.y+t}),F.add({x:o-T,y:B.y+t}),F.add({x:o-T,y:s.y+Y}),F.add({x:s.x+$,y:s.y+Y})):r===W?(T=s.x>B.x?-t:t,o=B.y+x+(s.y-n-B.y-x)*A,F.add({x:B.x+t,y:B.y+x}),F.add({x:B.x+t,y:o+T}),F.add({x:s.x+Y,y:o+T}),F.add({x:s.x+Y,y:s.y-n})):r===C&&(T=s.x>B.x?-t:t,o=B.y-x-(B.y-x-s.y-n)*A,F.add({x:B.x+t,y:B.y-x}),F.add({x:B.x+t,y:o-T}),F.add({x:s.x+Y,y:o-T}),F.add({x:s.x+Y,y:s.y+n})),U&&F.reverse(),L(F,O)},!0),p("flex2",function(p,f,Q){var R,O=p.getSourceAgent(),m=p.getTargetAgent(),b=O.getId()>m.getId(),P=b?m:O,t=b?O:m,K=P.p(),k=t.p(),d=u(Q,p,P),q=u(Q,p,t),x=p.s(H),s=p.s("edge.flex")+(d.size-1)/2*p.s(l),i=x?0:V(Q,P)/2,c=x?0:a(Q,P)/2,G=x?0:V(Q,t)/2,B=x?0:a(Q,t)/2,I=new z,g=d.offset,y=q.offset,Z=d.side;return Z===e?(R=k.y>K.y?-g:g,I.add({x:K.x+i,y:K.y+g}),I.add({x:K.x+i+s+R,y:K.y+g}),I.add({x:k.x-G-s+R,y:k.y+y}),I.add({x:k.x-G,y:k.y+y})):Z===v?(R=k.y>K.y?-g:g,I.add({x:K.x-i,y:K.y+g}),I.add({x:K.x-i-s-R,y:K.y+g}),I.add({x:k.x+G+s-R,y:k.y+y}),I.add({x:k.x+G,y:k.y+y})):Z===W?(R=k.x>K.x?-g:g,I.add({x:K.x+g,y:K.y+c}),I.add({x:K.x+g,y:K.y+c+s+R}),I.add({x:k.x+y,y:k.y-B-s+R}),I.add({x:k.x+y,y:k.y-B})):Z===C&&(R=k.x>K.x?-g:g,I.add({x:K.x+g,y:K.y-c}),I.add({x:K.x+g,y:K.y-c-s-R}),I.add({x:k.x+y,y:k.y+B+s-R}),I.add({x:k.x+y,y:k.y+B})),b&&I.reverse(),L(I,p)},!0),p("extend.north2",function(x,D,v){var W=x.getSourceAgent(),g=x.getTargetAgent(),k=W.getId()>g.getId(),b=k?g:W,e=k?W:g,$=b.p(),E=e.p(),o=Q(v,x,b,C),F=Q(v,x,e,C,!0),G=x.s(H),h=G?0:a(v,b)/2,R=G?0:a(v,e)/2,t=o.offset,O=F.offset,I=x.s(n)+(o.size-1)/2*x.s(l),d=q($.y-h,E.y-R)-I+($.x<E.x?t:-t),c=new z;return c.add({x:$.x+t,y:$.y-h}),c.add({x:$.x+t,y:d}),c.add({x:E.x+O,y:d}),c.add({x:E.x+O,y:E.y-R}),k&&c.reverse(),L(c,x)},!0),p("extend.south2",function(i,T,C){var e=i.getSourceAgent(),k=i.getTargetAgent(),q=e.getId()>k.getId(),w=q?k:e,R=q?e:k,$=w.p(),y=R.p(),J=Q(C,i,w,W),x=Q(C,i,R,W,!0),Z=i.s(H),p=Z?0:a(C,w)/2,d=Z?0:a(C,R)/2,X=J.offset,E=x.offset,b=i.s(n)+(J.size-1)/2*i.s(l),u=M($.y+p,y.y+d)+b+($.x>y.x?X:-X),o=new z;return o.add({x:$.x+X,y:$.y+p}),o.add({x:$.x+X,y:u}),o.add({x:y.x+E,y:u}),o.add({x:y.x+E,y:y.y+d}),q&&o.reverse(),L(o,i)},!0),p("extend.west2",function(x,o,O){var J=x.getSourceAgent(),f=x.getTargetAgent(),h=J.getId()>f.getId(),T=h?f:J,$=h?J:f,g=T.p(),d=$.p(),c=Q(O,x,T,C),M=Q(O,x,$,C,!0),p=x.s(H),w=p?0:V(O,T)/2,R=p?0:V(O,$)/2,a=c.offset,r=M.offset,W=x.s(n)+(c.size-1)/2*x.s(l),E=q(g.x-w,d.x-R)-W+(g.y<d.y?a:-a),s=new z;return s.add({x:g.x-w,y:g.y+a}),s.add({x:E,y:g.y+a}),s.add({x:E,y:d.y+r}),s.add({x:d.x-R,y:d.y+r}),h&&s.reverse(),L(s,x)},!0),p("extend.east2",function(a,m,T){var D=a.getSourceAgent(),d=a.getTargetAgent(),O=D.getId()>d.getId(),o=O?d:D,W=O?D:d,w=o.p(),B=W.p(),j=Q(T,a,o,C),r=Q(T,a,W,C,!0),P=a.s(H),Y=P?0:V(T,o)/2,b=P?0:V(T,W)/2,u=j.offset,e=r.offset,x=a.s(n)+(j.size-1)/2*a.s(l),K=M(w.x+Y,B.x+b)+x+(w.y>B.y?u:-u),k=new z;return k.add({x:w.x+Y,y:w.y+u}),k.add({x:K,y:w.y+u}),k.add({x:K,y:B.y+e}),k.add({x:B.x+b,y:B.y+e}),O&&k.reverse(),L(k,a)},!0),p("v.h2",function(u,k,R){return s(u,R,T)},!0),p("h.v2",function(W,m,A){return s(W,A,o)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);